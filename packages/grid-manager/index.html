<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>LT-Proxy-Channels</title>
    <style></style>
    <script>

    </script>
    <style>
        #box-1 {
            border: 1px solid black;
            height: 200px;
            width: 100%;
        }

        #box-2 {
            border: 1px solid black;
            height: 150px;
            width: 150px;
            position: relative;
            top: 100px;
            margin: 0 auto;
        }

        #left-case {
            position: absolute;
            left: 250px;
            top: 100px;
        }

        #right-case {
            position: absolute;
            right: 20px;
            top: 400px;
        }

        #content {
            width: 960px;
            margin: 0 auto;
        }
    </style>
</head>
<body>
<div id="box-1"></div>
<div id="box-2"></div>
<div>
    <button id="left-case">left-case</button>
    <button id="right-case" onclick="window.remountWidget()">re-mount right widget</button>
    <div id="content">
        <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Cum tempora unde quidem? Quasi veritatis nobis vitae
            facere excepturi, cum voluptate, doloribus magnam ea id voluptatibus. Natus commodi debitis adipisci
            explicabo!</p>
        <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Cum tempora unde quidem? Quasi veritatis nobis vitae
            facere excepturi, cum voluptate, doloribus magnam ea id voluptatibus. Natus commodi debitis adipisci
            explicabo!</p>
        <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Cum tempora unde quidem? Quasi veritatis nobis vitae
            facere excepturi, cum voluptate, doloribus magnam ea id voluptatibus. Natus commodi debitis adipisci
            explicabo!</p>
        <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Cum tempora unde quidem? Quasi veritatis nobis vitae
            facere excepturi, cum voluptate, doloribus magnam ea id voluptatibus. Natus commodi debitis adipisci
            explicabo!</p>
        <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Cum tempora unde quidem? Quasi veritatis nobis vitae
            facere excepturi, cum voluptate, doloribus magnam ea id voluptatibus. Natus commodi debitis adipisci
            explicabo!</p>
        <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Cum tempora unde quidem? Quasi veritatis nobis vitae
            facere excepturi, cum voluptate, doloribus magnam ea id voluptatibus. Natus commodi debitis adipisci
            explicabo!</p>
        <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Cum tempora unde quidem? Quasi veritatis nobis vitae
            facere excepturi, cum voluptate, doloribus magnam ea id voluptatibus. Natus commodi debitis adipisci
            explicabo!</p>
        <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Cum tempora unde quidem? Quasi veritatis nobis vitae
            facere excepturi, cum voluptate, doloribus magnam ea id voluptatibus. Natus commodi debitis adipisci
            explicabo!</p>
        <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Cum tempora unde quidem? Quasi veritatis nobis vitae
            facere excepturi, cum voluptate, doloribus magnam ea id voluptatibus. Natus commodi debitis adipisci
            explicabo!</p>
        <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Cum tempora unde quidem? Quasi veritatis nobis vitae
            facere excepturi, cum voluptate, doloribus magnam ea id voluptatibus. Natus commodi debitis adipisci
            explicabo!</p>
        <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Cum tempora unde quidem? Quasi veritatis nobis vitae
            facere excepturi, cum voluptate, doloribus magnam ea id voluptatibus. Natus commodi debitis adipisci
            explicabo!</p>
        <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Cum tempora unde quidem? Quasi veritatis nobis vitae
            facere excepturi, cum voluptate, doloribus magnam ea id voluptatibus. Natus commodi debitis adipisci
            explicabo!</p>
        <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Cum tempora unde quidem? Quasi veritatis nobis vitae
            facere excepturi, cum voluptate, doloribus magnam ea id voluptatibus. Natus commodi debitis adipisci
            explicabo!</p>
        <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Cum tempora unde quidem? Quasi veritatis nobis vitae
            facere excepturi, cum voluptate, doloribus magnam ea id voluptatibus. Natus commodi debitis adipisci
            explicabo!</p>
        <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Cum tempora unde quidem? Quasi veritatis nobis vitae
            facere excepturi, cum voluptate, doloribus magnam ea id voluptatibus. Natus commodi debitis adipisci
            explicabo!</p>
        <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Cum tempora unde quidem? Quasi veritatis nobis vitae
            facere excepturi, cum voluptate, doloribus magnam ea id voluptatibus. Natus commodi debitis adipisci
            explicabo!</p>
        <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Cum tempora unde quidem? Quasi veritatis nobis vitae
            facere excepturi, cum voluptate, doloribus magnam ea id voluptatibus. Natus commodi debitis adipisci
            explicabo!</p>
        <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Cum tempora unde quidem? Quasi veritatis nobis vitae
            facere excepturi, cum voluptate, doloribus magnam ea id voluptatibus. Natus commodi debitis adipisci
            explicabo!</p>
        <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Cum tempora unde quidem? Quasi veritatis nobis vitae
            facere excepturi, cum voluptate, doloribus magnam ea id voluptatibus. Natus commodi debitis adipisci
            explicabo!</p>
        <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Cum tempora unde quidem? Quasi veritatis nobis vitae
            facere excepturi, cum voluptate, doloribus magnam ea id voluptatibus. Natus commodi debitis adipisci
            explicabo!</p>
        <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Cum tempora unde quidem? Quasi veritatis nobis vitae
            facere excepturi, cum voluptate, doloribus magnam ea id voluptatibus. Natus commodi debitis adipisci
            explicabo!</p>
        <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Cum tempora unde quidem? Quasi veritatis nobis vitae
            facere excepturi, cum voluptate, doloribus magnam ea id voluptatibus. Natus commodi debitis adipisci
            explicabo!</p>
        <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Cum tempora unde quidem? Quasi veritatis nobis vitae
            facere excepturi, cum voluptate, doloribus magnam ea id voluptatibus. Natus commodi debitis adipisci
            explicabo!</p>
        <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Cum tempora unde quidem? Quasi veritatis nobis vitae
            facere excepturi, cum voluptate, doloribus magnam ea id voluptatibus. Natus commodi debitis adipisci
            explicabo!</p>
        <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Cum tempora unde quidem? Quasi veritatis nobis vitae
            facere excepturi, cum voluptate, doloribus magnam ea id voluptatibus. Natus commodi debitis adipisci
            explicabo!</p>
        <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Cum tempora unde quidem? Quasi veritatis nobis vitae
            facere excepturi, cum voluptate, doloribus magnam ea id voluptatibus. Natus commodi debitis adipisci
            explicabo!</p>
        <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Cum tempora unde quidem? Quasi veritatis nobis vitae
            facere excepturi, cum voluptate, doloribus magnam ea id voluptatibus. Natus commodi debitis adipisci
            explicabo!</p>
        <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Cum tempora unde quidem? Quasi veritatis nobis vitae
            facere excepturi, cum voluptate, doloribus magnam ea id voluptatibus. Natus commodi debitis adipisci
            explicabo!</p>
        <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Cum tempora unde quidem? Quasi veritatis nobis vitae
            facere excepturi, cum voluptate, doloribus magnam ea id voluptatibus. Natus commodi debitis adipisci
            explicabo!</p>
        <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Cum tempora unde quidem? Quasi veritatis nobis vitae
            facere excepturi, cum voluptate, doloribus magnam ea id voluptatibus. Natus commodi debitis adipisci
            explicabo!</p>
        <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Cum tempora unde quidem? Quasi veritatis nobis vitae
            facere excepturi, cum voluptate, doloribus magnam ea id voluptatibus. Natus commodi debitis adipisci
            explicabo!</p>
        <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Cum tempora unde quidem? Quasi veritatis nobis vitae
            facere excepturi, cum voluptate, doloribus magnam ea id voluptatibus. Natus commodi debitis adipisci
            explicabo!</p>
    </div>
</div>
<script>window.process = {env: 'development'}</script>
<script type="module">
    import { GridManager } from './dist/grid-manager.module.js';
    const machine = new GridManager();
    // in case of want to observe the state machine
    const widgetService = machine.start();

    var remount_widget = [
        {
            id: 'app-1',
            extra: {
                slug: 'bci',
                params: null
            },
            iframeType: 'lt-basic-container-multimedia',
            src: 'https://www.yofla.com/black-screen/',
            kind: 'iframe',
            addons: [],
            position: {
                relation: 'relative-to-viewport',
                reference: {
                    web: 'bottom-right',
                    tablet: 'bottom-left',
                    mobile: 'bottom'
                },
                element: null,
                display: 'fixed'
            },
            dimensions: {
                tablet: {
                    zIndex: 9999,
                    borderRadius: '10px 10px 0 0',
                    fullSize: false,
                    animate: true,
                    elevation: 2,
                    styles: null,
                    size: {
                        width: 360,
                        height: 460
                    },
                    offset: {
                        x: {
                            relationType: 'LL',
                            value: 15
                        },
                        y: {
                            relationType: 'BB',
                            value: 0
                        }
                    }
                },
                web: {
                    fullSize: false,
                    animate: true,
                    elevation: 2,
                    styles: null,
                    borderRadius: '10px 10px 0 0',
                    size: {
                        width: 460,
                        height: 560
                    },
                    offset: {
                        x: {
                            relationType: 'RR',
                            value: 15
                        },
                        y: {
                            relationType: 'BB',
                            value: 1
                        }
                    }
                },
                mobile: null
            }
        },
    ];

    window.remountWidget = () => {
        machine.renderWidgets(remount_widget)
    }

    window.addEventListener('load', () => {
        fetch('https://apps.staging.letsta.lk/achs')
            .then(res => res.json())
            .then(res => {

                const mapApps = res.apps.map((app) => {
                    return {
                        ...app,
                        ...app.states[app.initialState],
                        id: app.appName,
                        iframeType: 'lt-basic-container-multimedia',
                        src: 'https://www.yofla.com/black-screen/',
                    }
                }, [])
                const toRender = mapApps.filter(app => app.appRelationship !== 'relative-to-app')
                // start using the class
                machine.renderWidgets(toRender);



            })
    })
</script>
</body>
</html>
